<UserControl x:Class="PTRP.App.Views.Setup.FirstRunView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:viewmodels="clr-namespace:PTRP.ViewModels;assembly=PTRP.ViewModels"
             d:DataContext="{d:DesignInstance Type=viewmodels:FirstRunViewModel}"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             Background="{DynamicResource MaterialDesignPaper}">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Centered Card Container -->
        <Border MaxWidth="600" 
                MaxHeight="700"
                Margin="40"
                VerticalAlignment="Center"
                HorizontalAlignment="Center">
            
            <materialDesign:Card UniformCornerRadius="12"
                                 Padding="48">
                
                <StackPanel>
                    
                    <!-- App Icon -->
                    <materialDesign:PackIcon Kind="CogOutline"
                                           Width="80"
                                           Height="80"
                                           HorizontalAlignment="Center"
                                           Foreground="{DynamicResource PrimaryHueMidBrush}"
                                           Margin="0,0,0,24"/>
                    
                    <!-- Title -->
                    <TextBlock Text="Configurazione Iniziale"
                             Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                             HorizontalAlignment="Center"
                             Margin="0,0,0,8"/>
                    
                    <!-- Subtitle -->
                    <TextBlock HorizontalAlignment="Center"
                             Foreground="{DynamicResource MaterialDesignBodyLight}"
                             Margin="0,0,0,32"
                             TextAlignment="Center">
                        Questa istanza non è ancora configurata.<LineBreak/>
                        Importa un pacchetto di configurazione:
                    </TextBlock>
                    
                    <!-- Package Type Options -->
                    <Border Background="{DynamicResource MaterialDesignDivider}"
                            CornerRadius="8"
                            Padding="20"
                            Margin="0,0,0,24">
                        <StackPanel>
                            <!-- Admin Package -->
                            <StackPanel Orientation="Horizontal"
                                      Margin="0,0,0,12">
                                <materialDesign:PackIcon Kind="ShieldCrown"
                                                       Width="24"
                                                       Height="24"
                                                       VerticalAlignment="Center"
                                                       Foreground="{DynamicResource PrimaryHueMidBrush}"
                                                       Margin="0,0,12,0"/>
                                <TextBlock VerticalAlignment="Center">
                                    <Run FontWeight="SemiBold">admin.ptrp</Run>
                                    <Run Foreground="{DynamicResource MaterialDesignBodyLight}">→ per Coordinatore</Run>
                                </TextBlock>
                            </StackPanel>
                            
                            <!-- Appointments Package -->
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="CalendarAccount"
                                                       Width="24"
                                                       Height="24"
                                                       VerticalAlignment="Center"
                                                       Foreground="{DynamicResource SecondaryHueMidBrush}"
                                                       Margin="0,0,12,0"/>
                                <TextBlock VerticalAlignment="Center">
                                    <Run FontWeight="SemiBold">appointments_*.ptrp</Run>
                                    <Run Foreground="{DynamicResource MaterialDesignBodyLight}">→ per Educatore</Run>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                    
                    <!-- Import Button -->
                    <Button Content="Seleziona Pacchetto"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            Height="48"
                            Margin="0,0,0,16"
                            Command="{Binding ImportConfigurationCommand}"
                            IsEnabled="{Binding IsImporting, Converter={StaticResource InverseBooleanConverter}}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="FolderOpen"
                                                       Width="20"
                                                       Height="20"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,8,0"/>
                                <TextBlock Text="Seleziona Pacchetto"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>
                    
                    <!-- Import Status Message -->
                    <Border Visibility="{Binding IsImporting, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Padding="12"
                            Background="{DynamicResource MaterialDesignDivider}"
                            CornerRadius="4"
                            Margin="0,0,0,24">
                        <StackPanel Orientation="Horizontal">
                            <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}"
                                       IsIndeterminate="True"
                                       Width="20"
                                       Height="20"
                                       Margin="0,0,12,0"/>
                            <TextBlock Text="{Binding ImportStatusMessage}"
                                     VerticalAlignment="Center"
                                     Foreground="{DynamicResource MaterialDesignBody}"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Alert Box -->
                    <Border Background="{DynamicResource MaterialDesignDivider}"
                            BorderBrush="{DynamicResource PrimaryHueMidBrush}"
                            BorderThickness="1"
                            CornerRadius="4"
                            Padding="16"
                            Margin="0,8,0,0">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal"
                                      Margin="0,0,0,8">
                                <materialDesign:PackIcon Kind="InformationOutline"
                                                       Width="20"
                                                       Height="20"
                                                       VerticalAlignment="Top"
                                                       Foreground="{DynamicResource PrimaryHueMidBrush}"
                                                       Margin="0,0,8,0"/>
                                <TextBlock Text="Informazioni Importanti"
                                         FontWeight="SemiBold"
                                         VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock TextWrapping="Wrap"
                                     Foreground="{DynamicResource MaterialDesignBodyLight}"
                                     FontSize="13">
                                Il file ti sarà fornito dal Coordinatore o dall'amministratore di sistema. 
                                Non procedere senza aver ricevuto il pacchetto corretto.
                            </TextBlock>
                        </StackPanel>
                    </Border>
                    
                </StackPanel>
            </materialDesign:Card>
        </Border>
    </Grid>
</UserControl>
